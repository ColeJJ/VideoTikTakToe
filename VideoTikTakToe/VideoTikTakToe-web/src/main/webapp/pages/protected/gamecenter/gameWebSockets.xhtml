<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:f="http://java.sun.com/jsf/core"
  xmlns:h="http://java.sun.com/jsf/html"
  xmlns:ui="http://java.sun.com/jsf/facelets"
  xmlns:p="http://primefaces.org/ui"
>
  <h:head>
    <h:outputStylesheet name="css/game.css" />
    <h:outputScript name="js/clientScript.js" target="body" />
    <title>TikTakToe</title>
  </h:head>
  <h:body>
	 <h:form id="game">
	   <h3>TikTakToe - Game</h3>
	   <br/>
	   
	   <!-- Jitsi Videoserver -->
	   <div id="jaas-container" class="jitsi"/>
	   <script src='https://8x8.vc/external_api.js' async="async"></script>
	    <style>#jaas-container</style>
	    <script type="text/javascript">
	      window.onload = () => {
	        const api = new JitsiMeetExternalAPI("8x8.vc", {
	          roomName: "vpaas-magic-cookie-65e9dc1e683c479ab44c705afe448a8c/SampleAppImpossibleBellsBlockOverly",
	          parentNode: document.querySelector('#jaas-container')
	        });
	      }
	    </script>
	   <div/>
	   
	   <!-- Scoreboard -->
	  	<h:panelGroup id="scoreboard">
	  	<!-- Mit inputHidden kann js auf MB Values zugreifen -->
	  	<h:inputHidden id="bestof" value="#{spielsessionMB.aSessionTO.rundenAnzahl}"/>
	   	<h:inputHidden id="scoreSpieler1" value="#{spielsessionMB.aWertungTOSpieler1.punktestand}"/>   	
	   	<h:inputHidden id="siegeSpieler1" value="#{spielsessionMB.aWertungTOSpieler1.siege}"/>
	   	<h:inputHidden id="niederlagenSpieler1" value="#{spielsessionMB.aWertungTOSpieler1.niederlagen}"/>
	   	<h:inputHidden id="scoreSpieler2" value="#{spielsessionMB.aWertungTOSpieler2.punktestand}"/>
	   	<h:inputHidden id="siegeSpieler2" value="#{spielsessionMB.aWertungTOSpieler2.siege}"/>
	   	<h:inputHidden id="niederlagenSpieler2" value="#{spielsessionMB.aWertungTOSpieler2.niederlagen}"/>
	   	
	   	<h:panelGrid columns="2">
	   		<textarea cols="50" rows="10" disabled="disabled" id="out"></textarea>
			<h:outputLabel value="Lobby Spieler1: #{spielsessionMB.aLobbyTO.users[0].username}" />	
			<h:outputLabel value="Lobby Spieler2: #{spielsessionMB.aLobbyTO.users[1].username}" />
			<h:outputLabel value="Best of: ">
				<h:outputLabel id="test" value="#{spielsessionMB.aSessionTO.rundenAnzahl}" />
			</h:outputLabel>			
		</h:panelGrid>
		
		<h:commandButton value="Spiel Abbrechen" action="#{spielsessionMB.spielAbbrechen()}" />
		</h:panelGroup>
	
		<!-- TikTakToe -->
	   <h:panelGroup class="board" id="board">
	    <h:panelGroup class="cell"></h:panelGroup>
	    <h:panelGroup class="cell"></h:panelGroup>
	    <h:panelGroup class="cell"></h:panelGroup>
	    <h:panelGroup class="cell"></h:panelGroup>
	    <h:panelGroup class="cell"></h:panelGroup>
	    <h:panelGroup class="cell"></h:panelGroup>
	    <h:panelGroup class="cell"></h:panelGroup>
	    <h:panelGroup class="cell"></h:panelGroup>
	    <h:panelGroup class="cell"></h:panelGroup>
	   </h:panelGroup>
	   <h:panelGroup class="winning-message" id="winningMessage">
	   	<h:panelGroup class="data-winning-message-text" id="data-winning-message-score"></h:panelGroup>
	   	<h:panelGroup class="data-winning-message-text" id="data-winning-message-text"></h:panelGroup>
	  	 	<h:commandButton value="Restart" id="restartButton" styleClass="restartButton">
	  	 		<f:ajax execute="@form" />   	 	
	  	 	</h:commandButton>
	  	 	<h:commandButton value="Exit" id="exitButton" action="#{spielsessionMB.spielBeenden()}" styleClass="restartButton" />
	   </h:panelGroup>
	  </h:form>
  </h:body>
</html>